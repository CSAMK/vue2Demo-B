(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fe45ecb"],{"0c66":function(t,e,a){},3788:function(t,e,a){},"466f":function(t,e,a){},"4c79":function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return s})),a.d(e,"d",(function(){return i}));var n=a("365c");async function r(t){const e=await n["a"].get("/products/all",{params:t});return e}async function l(t){const e=await n["a"].post("/products/add",t);return e}async function s(t){const e=await n["a"].put("/products/edit",t);return e}async function i(t){const e=await n["a"].get("/products/"+t);return e}},8431:function(t,e,a){"use strict";a("0c66")},"94ee":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"comm-list"}},[e("div",{staticClass:"search-container"},[e("div",{staticClass:"search"},[e("Search",{attrs:{categoryList:t.categoryList},on:{handleSubmit:t.handleSearch}})],1),e("div",{staticClass:"add",on:{click:t.goCommodityAdd}},[e("el-button",{attrs:{plain:""}},[t._v("添加商品")])],1)]),e("div",{staticClass:"table-container"},[e("Table",{attrs:{tableData:t.tableData,tags:t.tags},on:{handleEdit:t.handleEdit}}),e("div",{staticClass:"page"},[e("Page",{attrs:{total:t.total},on:{handleCurrentChange:t.handleCurrentChange,handleSizeChange:t.handleSizeChange}})],1)],1)])},r=[],l=(a("14d9"),function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"search"}},[e("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[e("el-form-item",{attrs:{label:"检索关键字："}},[e("el-input",{attrs:{placeholder:"请输入关键字"},model:{value:t.formInline.searchWord,callback:function(e){t.$set(t.formInline,"searchWord",e)},expression:"formInline.searchWord"}})],1),e("el-form-item",{attrs:{label:"商品类目："}},[e("el-select",{attrs:{placeholder:"请选择商品类目",clearable:""},model:{value:t.formInline.category,callback:function(e){t.$set(t.formInline,"category",e)},expression:"formInline.category"}},t._l(t.categoryList,(function(t){return e("el-option",{key:t._id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("搜索")])],1)],1)],1)}),s=[],i={data(){return{formInline:{user:"",region:""}}},props:{categoryList:{type:Array,default(){return[]}}},methods:{onSubmit(){this.$emit("handleSubmit",this.formInline)}}},o=i,c=a("2877"),u=Object(c["a"])(o,l,s,!1,null,null,null),d=u.exports,p=function(){var t=this,e=t._self._c;return e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":{background:"#eef1f6",color:"#606266"}}},[t._l(t.tableTitles,(function(a,n){return e("el-table-column",{key:n,attrs:{label:a.label},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(n.row[a.props]))])]}}],null,!0)})})),e("el-table-column",{attrs:{label:"标签",prop:"tag",filters:t.tags,"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(a){return t._l(a.row.tags,(function(a,n){return e("el-tag",{key:n,attrs:{type:" success","disable-transitions":""}},[t._v(t._s(a))])}))}}])}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticClass:"edit-btn",attrs:{size:"mini"},on:{click:function(e){return t.handleEdit(a.$index,a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(a.$index,a.row)}}},[t._v("删除")])]}}])})],2)},h=[],g={data(){return{tableTitles:[{props:"id",label:"ID"},{props:"title",label:"标题"},{props:"desc",label:"描述"},{props:"categoryName",label:"类目"},{props:"price",label:"预售价格"},{props:"price_off",label:"折扣价格"},{props:"inventory",label:"限制购买数量"},{props:"statusName",label:"上架状态"}]}},props:["tableData","tags"],methods:{handleEdit(t,e){this.$emit("handleEdit",t,e)},handleDelete(t,e){this.$emit("handleDelete",t,e)},filterTag(t,e){return e.tag===t}}},f=g,m=(a("ccbc"),Object(c["a"])(f,p,h,!1,null,"796d973c",null)),b=m.exports,y=a("c405"),v=a("4c79"),C=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"page"}},[e("el-pagination",{attrs:{"current-page":t.currentPage1,"page-sizes":[10,20,30,40],"page-size":10,layout:"sizes, prev, pager, next",total:t.total,background:!0},on:{"size-change":t.sizeChange,"current-change":t.currentChange,"update:currentPage":function(e){t.currentPage1=e},"update:current-page":function(e){t.currentPage1=e}}})],1)},_=[],w={data(){return{currentPage1:1,currentPage2:5,currentPage3:5,currentPage4:4}},props:["total"],methods:{sizeChange(t){this.$emit("handleSizeChange",t)},currentChange(t){this.$emit("handleCurrentChange",t)}}},D=w,S=(a("8431"),Object(c["a"])(D,C,_,!1,null,null,null)),k=S.exports,z={data(){return{categoryList:[],tableData:[],pageData:{page:1,size:10},total:0,tags:[]}},components:{Search:d,Table:b,Page:k},async created(){const t=await Object(y["a"])();this.categoryList=t.data.data,this.getTableData()},methods:{handleSearch(t){console.log(t)},async getTableData(){const{categoryList:t}=this,e=new Set,a=[];let n=await Object(v["c"])(this.pageData);this.total=n.data.total,n=n.data.data.map(a=>{const n=t.filter(t=>t.id===a.category);return a.tags.forEach(t=>e.add(t)),{...a,categoryName:n[0].name,statusName:1===a.status?"上架":"下架"}}),this.tableData=n,e.forEach(t=>{a.push({text:t,value:t})}),this.tags=a},handleCurrentChange(t){this.pageData.page=t,this.getTableData()},handleSizeChange(t){this.pageData.size=t,this.getTableData()},goCommodityAdd(){this.$router.push("/commodity/add")},handleEdit(t,e){this.$router.push({name:"Edit",params:{id:e.id}})}}},x=z,$=(a("a364"),Object(c["a"])(x,n,r,!1,null,"5d9f425c",null));e["default"]=$.exports},a364:function(t,e,a){"use strict";a("466f")},c405:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n=a("365c");async function r(){const t=await n["a"].get("/category/all");return t}},ccbc:function(t,e,a){"use strict";a("3788")}}]);
//# sourceMappingURL=chunk-7fe45ecb.958cab0a.js.map