{"version":3,"sources":["webpack:///./src/views/commodity/Add.vue","webpack:///./src/components/commodity/Basic.vue","webpack:///src/components/commodity/Basic.vue","webpack:///./src/components/commodity/Basic.vue?7aae","webpack:///./src/components/commodity/Basic.vue?c180","webpack:///./src/components/commodity/Sales.vue","webpack:///src/components/commodity/Sales.vue","webpack:///./src/components/commodity/Sales.vue?e32d","webpack:///./src/components/commodity/Sales.vue?3198","webpack:///src/views/commodity/Add.vue","webpack:///./src/views/commodity/Add.vue?2cea","webpack:///./src/views/commodity/Add.vue?cdd6","webpack:///./src/api/products.js","webpack:///./src/views/commodity/Add.vue?7eec","webpack:///./src/components/commodity/Sales.vue?997f","webpack:///./src/components/commodity/Basic.vue?ef9e","webpack:///./src/api/category.js"],"names":["render","_vm","this","_c","_self","attrs","staticClass","active","directives","name","rawName","value","expression","options","categoryList","dataForm","on","next","prev","handleSubmit","staticRenderFns","ref","rules","model","title","callback","$$v","$set","desc","category","_l","item","key","_id","sonCategory","sonCategoryList","index","tags","label","$event","submitForm","_v","data","required","message","trigger","props","watch","computed","methods","console","component","price","price_off","inventory","unit","$store","state","userInfo","appkey","filesList","handleImageChange","scopedSlots","_u","fn","file","url","handlePictureCardPreview","disabled","_e","handleDownload","handleRemove","slot","dialogVisible","dialogImageUrl","images","status","uid","uploadFiles","components","Basic","Sales","productId","res","type","onClose","async","getProductsList","params","includes","get","addProduct","post","editProduct","put","productDetails","id","getCategory"],"mappings":"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","file":"js/chunk-aba6595c.f3fa3c35.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"add\"}},[_c('el-steps',{staticClass:\"steps\",attrs:{\"active\":_vm.active,\"align-center\":\"\",\"process-status\":\"wait\"}},[_c('el-step',{attrs:{\"title\":\"填写商品基本信息\"}}),_c('el-step',{attrs:{\"title\":\"填写商品销售信息\"}})],1),_c('div',{staticClass:\"edit-form\"},[_c('Basic',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.active === 1),expression:\"active === 1\"}],attrs:{\"options\":_vm.options,\"categoryList\":_vm.categoryList,\"dataForm\":_vm.dataForm},on:{\"handleSubmit\":_vm.next}}),_c('Sales',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.active === 2),expression:\"active === 2\"}],attrs:{\"dataForm\":_vm.dataForm},on:{\"prev\":_vm.prev,\"handleSubmit\":_vm.handleSubmit}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"basic\"}},[_c('el-form',{ref:\"dataForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.dataForm,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"标题\",\"prop\":\"title\"}},[_c('el-input',{model:{value:(_vm.dataForm.title),callback:function ($$v) {_vm.$set(_vm.dataForm, \"title\", $$v)},expression:\"dataForm.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品描述\",\"prop\":\"desc\"}},[_c('el-input',{model:{value:(_vm.dataForm.desc),callback:function ($$v) {_vm.$set(_vm.dataForm, \"desc\", $$v)},expression:\"dataForm.desc\"}})],1),_c('el-form-item',{staticClass:\"form-category\",attrs:{\"label\":\"商品类目\",\"prop\":\"category\"}},[_c('el-select',{staticClass:\"category\",attrs:{\"placeholder\":\"请选择商品类目\"},model:{value:(_vm.dataForm.category),callback:function ($$v) {_vm.$set(_vm.dataForm, \"category\", $$v)},expression:\"dataForm.category\"}},_vm._l((_vm.categoryList),function(item){return _c('el-option',{key:item._id,attrs:{\"label\":item.name,\"value\":item.name}})}),1),_c('el-select',{staticClass:\"sonCategory\",attrs:{\"placeholder\":\"请选择子类目\"},model:{value:(_vm.dataForm.sonCategory),callback:function ($$v) {_vm.$set(_vm.dataForm, \"sonCategory\", $$v)},expression:\"dataForm.sonCategory\"}},_vm._l((_vm.sonCategoryList),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"商品标签\",\"prop\":\"tags\"}},[_c('el-select',{staticClass:\"tags\",attrs:{\"multiple\":\"\",\"filterable\":\"\",\"allow-create\":\"\",\"default-first-option\":\"\"},model:{value:(_vm.dataForm.tags),callback:function ($$v) {_vm.$set(_vm.dataForm, \"tags\", $$v)},expression:\"dataForm.tags\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('dataForm')}}},[_vm._v(\"下一步\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 基础信息\n<template>\n  <div id=\"basic\">\n    <el-form\n      :model=\"dataForm\"\n      :rules=\"rules\"\n      ref=\"dataForm\"\n      label-width=\"100px\"\n      class=\"demo-ruleForm\"\n    >\n      <el-form-item label=\"标题\" prop=\"title\">\n        <el-input v-model=\"dataForm.title\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"商品描述\" prop=\"desc\">\n        <el-input v-model=\"dataForm.desc\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"商品类目\" prop=\"category\" class=\"form-category\">\n        <el-select\n          v-model=\"dataForm.category\"\n          class=\"category\"\n          placeholder=\"请选择商品类目\"\n        >\n          <el-option\n            v-for=\"item in categoryList\"\n            :label=\"item.name\"\n            :value=\"item.name\"\n            :key=\"item._id\"\n          ></el-option>\n        </el-select>\n        <el-select\n          v-model=\"dataForm.sonCategory\"\n          placeholder=\"请选择子类目\"\n          class=\"sonCategory\"\n        >\n          <el-option\n            v-for=\"(item, index) in sonCategoryList\"\n            :label=\"item\"\n            :value=\"item\"\n            :key=\"index\"\n          ></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"商品标签\" prop=\"tags\">\n        <el-select\n          v-model=\"dataForm.tags\"\n          multiple\n          filterable\n          allow-create\n          default-first-option\n          class=\"tags\"\n        >\n          <el-option\n            v-for=\"item in options\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          >\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitForm('dataForm')\"\n          >下一步</el-button\n        >\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      // dataForm: {\n      //   title: '',\n      //   category: '',\n      //   desc: '',\n      //   sonCategory: '',\n      //   tags: [],\n      // },\n      rules: {\n        title: [{ required: true, message: '请输入标题', trigger: 'blur' }],\n        category: [\n          { required: true, message: '请选择商品类目', trigger: 'change' },\n        ],\n        tags: [\n          {\n            required: true,\n            message: '请选择商品标签',\n            trigger: 'change',\n          },\n        ],\n      },\n    };\n  },\n  props: ['categoryList', 'options', 'dataForm'],\n  watch: {},\n  computed: {\n    sonCategoryList() {\n      // console.log(this.dataForm.category);\n      //   console.log(this.categoryList);\n      if (!this.dataForm.category) {\n        return [];\n      }\n      const categoryItems = this.categoryList.filter(\n        (item) => item.name === this.dataForm.category,\n      );\n      // console.log(categoryItems);\n      return categoryItems[0].c_items;\n    },\n  },\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          //   console.log(this.dataForm);\n          return this.$emit('handleSubmit', this.dataForm);\n        }\n        console.log('error submit!!');\n        return false;\n      });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n#basic {\n  width: 100%;\n  max-width: 850px;\n}\n\n.category,\n.sonCategory,\n.tags {\n  display: block;\n}\n\n.category {\n  margin-bottom: 10px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Basic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Basic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Basic.vue?vue&type=template&id=dde0c8ae&scoped=true&\"\nimport script from \"./Basic.vue?vue&type=script&lang=js&\"\nexport * from \"./Basic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Basic.vue?vue&type=style&index=0&id=dde0c8ae&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dde0c8ae\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"sales\"}},[_c('el-form',{ref:\"dataForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.dataForm,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"商品售价\",\"prop\":\"price\"}},[_c('el-input',{model:{value:(_vm.dataForm.price),callback:function ($$v) {_vm.$set(_vm.dataForm, \"price\", $$v)},expression:\"dataForm.price\"}})],1),_c('el-form-item',{attrs:{\"label\":\"折扣价格\",\"prop\":\"price_off\"}},[_c('el-input',{model:{value:(_vm.dataForm.price_off),callback:function ($$v) {_vm.$set(_vm.dataForm, \"price_off\", $$v)},expression:\"dataForm.price_off\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品库存\",\"prop\":\"inventory\"}},[_c('el-input',{model:{value:(_vm.dataForm.inventory),callback:function ($$v) {_vm.$set(_vm.dataForm, \"inventory\", $$v)},expression:\"dataForm.inventory\"}})],1),_c('el-form-item',{attrs:{\"label\":\"计量单位\",\"prop\":\"unit\"}},[_c('el-input',{model:{value:(_vm.dataForm.unit),callback:function ($$v) {_vm.$set(_vm.dataForm, \"unit\", $$v)},expression:\"dataForm.unit\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品相册\",\"prop\":\"images\"}},[_c('div',{staticClass:\"uploadImg\"},[_c('el-upload',{ref:\"uploadImg\",attrs:{\"action\":'https://mallapi.duyiedu.com/upload/images?appkey=' +\n            _vm.$store.state.userInfo.appkey,\"list-type\":\"picture-card\",\"file-list\":_vm.filesList,\"on-change\":_vm.handleImageChange},scopedSlots:_vm._u([{key:\"file\",fn:function({ file }){return _c('div',{},[_c('img',{staticClass:\"el-upload-list__item-thumbnail\",attrs:{\"src\":file.url,\"alt\":\"\"}}),_c('span',{staticClass:\"el-upload-list__item-actions\"},[_c('span',{staticClass:\"el-upload-list__item-preview\",on:{\"click\":function($event){return _vm.handlePictureCardPreview(file)}}},[_c('i',{staticClass:\"el-icon-zoom-in\"})]),(!_vm.disabled)?_c('span',{staticClass:\"el-upload-list__item-delete\",on:{\"click\":function($event){return _vm.handleDownload(file)}}},[_c('i',{staticClass:\"el-icon-download\"})]):_vm._e(),(!_vm.disabled)?_c('span',{staticClass:\"el-upload-list__item-delete\",on:{\"click\":function($event){return _vm.handleRemove(file)}}},[_c('i',{staticClass:\"el-icon-delete\"})]):_vm._e()])])}}])},[_c('i',{staticClass:\"el-icon-plus\",attrs:{\"slot\":\"default\"},slot:\"default\"})])],1),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.prev}},[_vm._v(\"上一步\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('dataForm')}}},[_vm._v(\"提交\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 商品销售信息\n<template>\n  <div id=\"sales\">\n    <el-form\n      :model=\"dataForm\"\n      :rules=\"rules\"\n      ref=\"dataForm\"\n      label-width=\"100px\"\n      class=\"demo-ruleForm\"\n    >\n      <el-form-item label=\"商品售价\" prop=\"price\">\n        <el-input v-model=\"dataForm.price\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"折扣价格\" prop=\"price_off\">\n        <el-input v-model=\"dataForm.price_off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"商品库存\" prop=\"inventory\">\n        <el-input v-model=\"dataForm.inventory\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"计量单位\" prop=\"unit\">\n        <el-input v-model=\"dataForm.unit\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"商品相册\" prop=\"images\">\n        <div class=\"uploadImg\">\n          <!-- :auto-upload=\"true\" -->\n          <el-upload\n            :action=\"\n              'https://mallapi.duyiedu.com/upload/images?appkey=' +\n              $store.state.userInfo.appkey\n            \"\n            list-type=\"picture-card\"\n            :file-list=\"filesList\"\n            :on-change=\"handleImageChange\"\n            ref=\"uploadImg\"\n          >\n            <i slot=\"default\" class=\"el-icon-plus\"></i>\n            <div slot=\"file\" slot-scope=\"{ file }\">\n              <img\n                class=\"el-upload-list__item-thumbnail\"\n                :src=\"file.url\"\n                alt=\"\"\n              />\n              <span class=\"el-upload-list__item-actions\">\n                <span\n                  class=\"el-upload-list__item-preview\"\n                  @click=\"handlePictureCardPreview(file)\"\n                >\n                  <i class=\"el-icon-zoom-in\"></i>\n                </span>\n                <span\n                  v-if=\"!disabled\"\n                  class=\"el-upload-list__item-delete\"\n                  @click=\"handleDownload(file)\"\n                >\n                  <i class=\"el-icon-download\"></i>\n                </span>\n                <span\n                  v-if=\"!disabled\"\n                  class=\"el-upload-list__item-delete\"\n                  @click=\"handleRemove(file)\"\n                >\n                  <i class=\"el-icon-delete\"></i>\n                </span>\n              </span>\n            </div>\n          </el-upload>\n        </div>\n        <el-dialog :visible.sync=\"dialogVisible\">\n          <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\n        </el-dialog>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"prev\">上一步</el-button>\n        <el-button type=\"primary\" @click=\"submitForm('dataForm')\"\n          >提交</el-button\n        >\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      // dataForm: {\n      //   price: '',\n      //   price_off: '',\n      //   unit: '',\n      //   images: [],\n      //   inventory: '',\n      // },\n      dialogImageUrl: '',\n      dialogVisible: false,\n      disabled: false,\n      rules: {\n        price: [{ required: true, message: '请输入商品价格', trigger: 'blur' }],\n        unit: [{ required: true, message: '请输入计量单位', trigger: 'blur' }],\n        inventory: [\n          { required: true, message: '请输入商品库存', trigger: 'blur' },\n        ],\n        images: [{ required: true, message: '请上传图片', trigger: 'change' }],\n      },\n    };\n  },\n  props: ['dataForm'],\n  computed: {\n    filesList() {\n      // console.log('uploadImg', this.$refs.uploadImg);\n      console.log('dataForm', this.dataForm);\n      const arr = this.dataForm.images.map((item, index) => ({\n        name: `image-${index}.png`,\n        status: 'success',\n        uid: index,\n        url: item,\n      }));\n      // console.log('arr', arr);\n      return arr;\n    },\n  },\n  methods: {\n    prev() {\n      // 上一步\n      this.$emit('prev', this.dataForm);\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          //   console.log(this.ruleForm);\n          return this.$emit('handleSubmit', this.dataForm);\n        }\n        console.log('error submit!!');\n        return false;\n      });\n    },\n    handleRemove(file) {\n      // console.log(file);\n      let { uploadFiles } = this.$refs.uploadImg;\n      uploadFiles = uploadFiles.filter((item) => item.url !== file.url);\n      console.log(uploadFiles);\n      this.dataForm.images = uploadFiles;\n    },\n    handlePictureCardPreview(file) {\n      // console.log(file);\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    handleDownload(file) {\n      console.log(file);\n    },\n    handleImageChange(file, fileList) {\n      // console.log(\"handleImageChange：\", file, fileList);\n      // return false;\n      this.dataForm.images = fileList;\n      this.$refs.dataForm.validateField('images');\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n#sales {\n  width: 100%;\n  max-width: 850px;\n\n  .uploadImg {\n    display: flex;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sales.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sales.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sales.vue?vue&type=template&id=555883ef&scoped=true&\"\nimport script from \"./Sales.vue?vue&type=script&lang=js&\"\nexport * from \"./Sales.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Sales.vue?vue&type=style&index=0&id=555883ef&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"555883ef\",\n  null\n  \n)\n\nexport default component.exports","// 添加商品界面\n<template>\n  <div id=\"add\">\n    <el-steps :active=\"active\" align-center class=\"steps\" process-status=\"wait\">\n      <el-step title=\"填写商品基本信息\"></el-step>\n      <el-step title=\"填写商品销售信息\"></el-step>\n    </el-steps>\n\n    <div class=\"edit-form\">\n      <Basic\n        :options=\"options\"\n        :categoryList=\"categoryList\"\n        @handleSubmit=\"next\"\n        v-show=\"active === 1\"\n        :dataForm=\"dataForm\"\n      />\n\n      <Sales\n        v-show=\"active === 2\"\n        :dataForm=\"dataForm\"\n        @prev=\"prev\"\n        @handleSubmit=\"handleSubmit\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Basic from '@/components/commodity/Basic.vue';\nimport Sales from '@/components/commodity/Sales.vue';\nimport { getCategory } from '@/api/category';\nimport * as API from '@/api/products';\n\nexport default {\n  components: {\n    Basic,\n    Sales,\n  },\n  data() {\n    return {\n      options: [\n        {\n          value: '包邮，最晚次日达',\n          label: '包邮，最晚次日达',\n        },\n      ],\n      dataForm: {\n        price: '',\n        price_off: '',\n        unit: '',\n        images: [],\n        inventory: '',\n        title: '',\n        category: '',\n        desc: '',\n        sonCategory: '',\n        tags: [],\n        status: 1, // 商品上架状态\n      },\n      categoryList: [],\n      active: 1, // 步骤条\n      productId: '',\n    };\n  },\n  async created() {\n    // console.log(this.$route);\n    // 根据地址栏判断是添加商品还是编辑商品\n    let res = '';\n    res = await getCategory();\n    this.categoryList = res.data.data;\n    if (this.$route.params.id) {\n      this.productId = this.$route.params.id;\n      res = await API.productDetails(this.productId);\n      const categoryName = this.categoryList.filter(\n        (item) => item.id === res.data.category,\n      );\n      console.log(res);\n      this.dataForm = {\n        ...res.data,\n        sonCategory: res.data.c_item,\n        category: categoryName[0].name,\n      };\n    }\n  },\n  methods: {\n    next() {\n      // console.log(form);\n\n      this.active += 1;\n    },\n    prev() {\n      // console.log(form);\n      this.active -= 1;\n    },\n    async handleSubmit() {\n      // console.log(form);\n      console.log(this.dataForm);\n      // return;\n      const categoryName = this.dataForm.category;\n      const category = this.categoryList.filter(\n        (item) => item.name === categoryName,\n      );\n      const obj = {\n        ...this.dataForm,\n        category: category[0].id,\n      };\n\n      let res = '';\n\n      if (this.productId) {\n        res = await API.editProduct(obj);\n      } else {\n        res = await API.addProduct(obj);\n      }\n      // console.log(res);\n      if (res.status === 'success') {\n        // 跳到商品列表界面\n        this.$message({\n          message: '商品编辑成功',\n          type: 'success',\n          onClose: () => {\n            this.$router.push('/commodity/list');\n          },\n        });\n      } else {\n        this.$message({\n          message: res.msg,\n          type: 'error',\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"less\">\n#add {\n  padding: 20px 0;\n\n  /deep/.el-steps {\n    .el-step__icon {\n      width: 32px;\n      height: 32px;\n      font-size: 16px;\n    }\n\n    .el-step__title {\n      font-weight: 500;\n    }\n  }\n\n  .edit-form {\n    padding: 42px 0 20px;\n    width: 100%;\n    box-sizing: border-box;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border: 1px dashed #e9e9e9;\n    border-radius: 6px;\n    background-color: #fafafa;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Add.vue?vue&type=template&id=515b227a&\"\nimport script from \"./Add.vue?vue&type=script&lang=js&\"\nexport * from \"./Add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Add.vue?vue&type=style&index=0&id=515b227a&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// // 关于产品的接口\nimport includes from './index';\n\n// 查询产品列表\nasync function getProductsList(params) {\n  const res = await includes.get('/products/all', {\n    params,\n  });\n  return res;\n}\n\n// 添加商品\nasync function addProduct(params) {\n  const res = await includes.post('/products/add', params);\n  return res;\n}\n\n// 编辑商品\nasync function editProduct(params) {\n  const res = await includes.put('/products/edit', params);\n  return res;\n}\n\n// 查询商品详情\nasync function productDetails(id) {\n  const res = await includes.get(`/products/${id}`);\n  return res;\n}\n\nexport {\n  getProductsList,\n  addProduct,\n  editProduct,\n  productDetails,\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Add.vue?vue&type=style&index=0&id=515b227a&prod&lang=less&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sales.vue?vue&type=style&index=0&id=555883ef&prod&scoped=true&lang=less&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Basic.vue?vue&type=style&index=0&id=dde0c8ae&prod&scoped=true&lang=less&\"","// 关于商品类目的接口\nimport includes from './index';\n\nasync function getCategory() {\n  const res = await includes.get('/category/all');\n  return res;\n}\n\nasync function getCategory2() {\n  const res = await includes.get('/category/all');\n  return res;\n}\n\nexport {\n  getCategory,\n  getCategory2,\n};\n"],"sourceRoot":""}